# Solana Kit Lite MVP

_Proof of Concept for discussion_

A developer-friendly wrapper around [@solana/kit](https://github.com/anza-xyz/kit) that simplifies complex APIs while maintaining full functionality.

## Why Kit Lite?

- **Only Essential Methods**: Only common RPC methods are included
- **Simplified API**: Eliminates the need for manual `.send()` calls on RPC methods
- **Simplified Imports**: Import _Connection_, _TransactionBuilder_, _Keypair_, and your target Program SDK -- that's it.
- **Better Developer Experience**: Intuitive method signatures with sensible defaults
- **Type Safety**: Converts `bigint` to `number` where safe, maintains strict TypeScript types
- **Full Compatibility**: Access to underlying Kit functionality via `.raw` property
- **Lightweight**: Only 2 dependencies (@solana/kit and @solana-program/compute-budget)

## Features

- All RPC methods are auto-sent, so you don't need to call `.send()` on them.
- Use `prepare()` to estimate compute and refresh the blockhash.
- Class-based architecture similar to @solana/web3.js & Anchor's transaction builder.

```ts
import { Connection, TransactionBuilder, Keypair } from '../src';
import { getTransferSolInstruction } from '@solana-program/system';

const connection = new Connection('https://api.devnet.solana.com');

const transferInstruction = getTransferSolInstruction({
    source: feePayer,
    destination: Keypair.generate().address,
    amount: 100_000_000,
});

const signature = await TransactionBuilder.create(connection, { feePayer })
    .add(transferInstruction)
    .prepareAndSendAndConfirm();
```

## Project Structure

```
src/
├── connection/           # Main Connection class with RPC methods
├── helpers/
│   ├── keypair/         # Keypair generation and utilities
│   ├── transaction/     # TransactionBuilder with compute estimation
│   ├── confirmation/    # Racing confirmation strategies
│   ├── errors/          # Solana error handling and mapping
│   ├── logger/          # Configurable logging system
│   └── utils/           # Type conversion and utility functions
└── types/               # Simplified TypeScript type definitions
```

## Development

### Prerequisites

- Node.js 18+
- PNPM (recommended)

### Setup

```bash
git clone <repository>
cd solana-kit-lite
pnpm install
```

### Available Scripts

```bash
pnpm build                   # Build TypeScript
pnpm test:unit               # Run unit tests (fast, mocked)
pnpm test:integration        # Run integration tests (requires validator)
pnpm test                    # Run all tests
pnpm demo                    # Run demo example
```

### Running Tests

#### Unit Tests (No Network Required)

```bash
pnpm test:unit
```

#### Integration Tests (Network Required)

```bash
# Start local validator first
solana-test-validator -r

# Run integration tests
pnpm test:integration
```

### Demo

The demo showcases all major functionality:

```bash
# Start validator
solana-test-validator -r

# Run demo in another terminal
pnpm demo
```

The demo demonstrates:

- Connection methods (balance, blockhash, account info)
- Airdrop handling with race condition prevention
- TransactionBuilder with compute estimation
- Transaction confirmation strategies
- Error handling and logging

# Bundle Size Comparison Report

Generated on: 2025-08-13

Each demo is a self-contained example of using the SDK (Gill, Kit Lite, and @solana/kit). Each demo generates a couple of KeyPairSigners, performs an airdrop, and transfers SOL between them. The demos are built to generate a bundle size comparison report using [compare-bundles.js](./demos/compare-bundles.js).
Check out [demos](./demos) for a comparison of the different SDKs. 
## Summary Table

| SDK | Bundle Size | Lines of Code | Size Factor |
|-----|-------------|---------------|-------------|
| @solana/kit | 192.89 KB | 118 | 1.00x |
| Gill | 197.68 KB | 62 | 1.02x |
| Kit Lite | 218.94 KB | 23 | 1.14x |
| web3.js | 627.68 KB | 21 | 3.25x |

## Kit Lite vs @solana/kit

Kit Lite is **13.5% larger** than @solana/kit. This overhead includes developer-friendly abstractions and improved DX.

*Report generated by bundle comparison tool*